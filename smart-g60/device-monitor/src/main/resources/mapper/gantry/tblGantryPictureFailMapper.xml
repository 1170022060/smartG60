<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<!-- ETC 门架牌识图片（交易失败或未匹配）上传(TBL_GANTRY_PICTURE_FAIL) -->
<mapper namespace="com.pingok.devicemonitor.mapper.gantry.TblGantryPictureFailMapper">
    <!-- This code was generated by TableGo tools, mark 1 begin. -->
    <!-- 字段映射 -->
    <resultMap id="tblGantryPictureFailMap" type="TblGantryPictureFail">
        <id column="PIC_ID" property="picId" jdbcType="NVARCHAR" />
        <result column="GANTRY_ID" property="gantryId" jdbcType="NVARCHAR" />
        <result column="IMAGE" property="image" jdbcType="NVARCHAR" />
        <result column="LICENSE_IMAGE" property="licenseImage" jdbcType="NVARCHAR" />
        <result column="BIN_IMAGE" property="binImage" jdbcType="NVARCHAR" />
        <result column="PIC_TIME" property="picTime" jdbcType="TIMESTAMP" />
        <result column="VEHICLE_PLATE" property="vehiclePlate" jdbcType="NVARCHAR" />
    </resultMap>
    <!-- This code was generated by TableGo tools, mark 1 end. -->

    <!-- This code was generated by TableGo tools, mark 2 begin. -->
    <!-- 表查询字段 -->
    <sql id="allColumns">
        tgpf.PIC_ID, tgpf.GANTRY_ID, tgpf.IMAGE, tgpf.LICENSE_IMAGE, tgpf.BIN_IMAGE, tgpf.PIC_TIME, tgpf.VEHICLE_PLATE
    </sql>
    <!-- This code was generated by TableGo tools, mark 2 end. -->

    <!-- 查询所有ETC 门架牌识图片（交易失败或未匹配）上传 -->
    <select id="findTblGantryPictureFailAll" resultMap="tblGantryPictureFailMap">
        SELECT
            <include refid="allColumns" />
        FROM TBL_GANTRY_PICTURE_FAIL tgpf
    </select>

    <!-- 根据条件参数查询ETC 门架牌识图片（交易失败或未匹配）上传列表 -->
    <select id="findTblGantryPictureFailByCondition" resultMap="tblGantryPictureFailMap" parameterType="map">
        SELECT
            <include refid="allColumns" />
        FROM TBL_GANTRY_PICTURE_FAIL tgpf WHERE 1 = 1
        <if test="gantryId != null and gantryId != ''">
            AND tgpf.GANTRY_ID LIKE '%' || #{gantryId} || '%'
        </if>
        <if test="image != null and image != ''">
            AND tgpf.IMAGE LIKE '%' || #{image} || '%'
        </if>
        <if test="licenseImage != null and licenseImage != ''">
            AND tgpf.LICENSE_IMAGE LIKE '%' || #{licenseImage} || '%'
        </if>
        <if test="binImage != null and binImage != ''">
            AND tgpf.BIN_IMAGE LIKE '%' || #{binImage} || '%'
        </if>
        <if test="picTime != null">
            AND tgpf.PIC_TIME = #{picTime}
        </if>
        <if test="vehiclePlate != null and vehiclePlate != ''">
            AND tgpf.VEHICLE_PLATE LIKE '%' || #{vehiclePlate} || '%'
        </if>
    </select>

    <!-- 根据主键查询ETC 门架牌识图片（交易失败或未匹配）上传信息 -->
    <select id="findTblGantryPictureFailByIds" resultMap="tblGantryPictureFailMap" parameterType="list">
        SELECT
            <include refid="allColumns" />
        FROM TBL_GANTRY_PICTURE_FAIL tgpf WHERE tgpf.PIC_ID IN
        <foreach collection="list" index="index" item="picId" open="(" separator="," close=")">
            #{picId}
        </foreach>
    </select>

    <!-- 新增ETC 门架牌识图片（交易失败或未匹配）上传信息 -->
    <insert id="addTblGantryPictureFail">
        INSERT INTO TBL_GANTRY_PICTURE_FAIL (
            PIC_ID, GANTRY_ID, IMAGE, LICENSE_IMAGE, BIN_IMAGE, PIC_TIME, VEHICLE_PLATE
        ) VALUES (
            #{picId,jdbcType=NVARCHAR},
            #{gantryId,jdbcType=NVARCHAR},
            #{image,jdbcType=NVARCHAR},
            #{licenseImage,jdbcType=NVARCHAR},
            #{binImage,jdbcType=NVARCHAR},
            #{picTime,jdbcType=TIMESTAMP},
            #{vehiclePlate,jdbcType=NVARCHAR}
        )
    </insert>

    <!-- 修改ETC 门架牌识图片（交易失败或未匹配）上传信息 -->
    <update id="updateTblGantryPictureFail">
        UPDATE TBL_GANTRY_PICTURE_FAIL
        <set>
            <if test="gantryId != null">
                GANTRY_ID = #{gantryId,jdbcType=NVARCHAR},
            </if>
            <if test="image != null">
                IMAGE = #{image,jdbcType=NVARCHAR},
            </if>
            <if test="licenseImage != null">
                LICENSE_IMAGE = #{licenseImage,jdbcType=NVARCHAR},
            </if>
            <if test="binImage != null">
                BIN_IMAGE = #{binImage,jdbcType=NVARCHAR},
            </if>
            <if test="picTime != null">
                PIC_TIME = #{picTime,jdbcType=TIMESTAMP},
            </if>
            <if test="vehiclePlate != null">
                VEHICLE_PLATE = #{vehiclePlate,jdbcType=NVARCHAR}
            </if>
        </set>
        WHERE PIC_ID = #{picId}
    </update>

    <!-- 根据主键删除ETC 门架牌识图片（交易失败或未匹配）上传 -->
    <delete id="deleteTblGantryPictureFailById" parameterType="string">
        DELETE FROM TBL_GANTRY_PICTURE_FAIL WHERE PIC_ID = #{picId}
    </delete>

</mapper>